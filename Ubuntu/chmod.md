# Команда chmod в Linux

Команда chmod используется для изменения прав доступа к файлам и папкам. Права определяют, кто может читать, записывать или выполнять файл/папку.

`Шпаргалка по числовым значениям прав`

```yml
| Владелец   | Группа   | Остальные  | Код                                             
| rwx        | r-x      | r--        | 755
| rw-        | r--      | ---        | 640
| rw-        | ---      | ---        | 600
| r--        | r--      | r--        | 444
| rwx        | rwx      | rwx        | 777
```

## Навигация

- [Основные категории пользователей (U, G, O, A)](#основные-категории-пользователей-u-g-o-a)
- [Типы прав](#типы-прав)
- [Форматы записи прав](#форматы-записи-прав)
- - [Чтение текущих прав](#чтение-текущих-прав)
- [Как работают права?](#как-работают-права)
- [Символьный режим (буквы)](#символьный-режим-буквы)
- [Числовой режим (октальный)](#числовой-режим-октальный)
- [Примеры использования](#примеры-использования)
- - [Сделать скрипт исполняемым](#сделать-скрипт-исполняемым)
- - [Разрешить всем читать файл, но только владельцу редактировать](#разрешить-всем-читать-файл-но-только-владельцу-редактировать)
- - [Убрать все права у остальных](#убрать-все-права-у-остальных)
- - [Разрешить группе и владельцу выполнять файл](#разрешить-группе-и-владельцу-выполнять-файл)
- [Особые права](#особые-права)

## Основные категории пользователей (U, G, O, A)

* `u` – владелец файла (user).
* `g` – группа, связанная с файлом (group).
* `o` – все остальные (others).
* `a` – все категории сразу (all).

## Типы прав

* `r` (read) – чтение (4).
* `w` (write) – запись (2).
* `x` (execute) – выполнение (1).
* `-` – отсутствие права.

## Форматы записи прав

* Символьный (буквы `r, w, x`):
  * Например: `u+r`, `g-wx`, `o+x`.
* Числовой (октальный код):
  * Например: `chmod 755` или chmod `644`.

### Чтение текущих прав

Используй команду `ls -l` для просмотра текущих прав:

```bash
ls -l filename
```

Пример:

```csharp
-rwxr-xr--  1 user group 1024 Nov 21  filename
```

* Первые 10 символов: тип файла + права (например, `-rw-r--r--`).
* `rwx`: права для владельца, группы и остальных.

## Как работают права?

Каждая категория прав – это сумма чисел:

* `r` = 4
* `w` = 2
* `x` = 1

Пример для файла:

* Права `rwx` = 4 + 2 + 1 = 7.
* Права `rw-` = 4 + 2 + 0 = 6.
* Права `r--` = 4 + 0 + 0 = 4.

## Символьный режим (буквы)

Формат:

```bash
chmod [категория][оператор][права] файл
```

Операторы:

* `+` – добавить права.
* `-` – убрать права.
* `=` – установить точные права, сбросив остальные.

Примеры:

1. Добавить право на выполнение для владельца:

```bash
chmod u+x script.sh
```

2. Убрать права на запись для остальных:

```bash
chmod o-w file.txt
```

3. Установить права только для чтения для всех:

```bash
chmod a=r file.txt
```

## Числовой режим (октальный)

Формат:

```bash
chmod [число_для_u][число_для_g][число_для_o] файл
```

Примеры:

1. Установить права `rwx` для владельца, `r-x` для группы и `r--` для остальных:

```bash
chmod 755 file.txt
```

Расшифровка:

* Владелец: `7` = `rwx`.
* Группа: `5` = `r-x`.
* Остальные: `5` = `r--`.

2. Установить права `rw-` для владельца, `r--` для группы и без прав для остальных:

```bash
chmod 640 file.txt
```

## Примеры использования

### Сделать скрипт исполняемым

```bash
chmod +x script.sh
```

### Разрешить всем читать файл, но только владельцу редактировать

```bash
chmod 644 file.txt
```

### Убрать все права у остальных

```bash
chmod o-rwx file.txt
```

### Разрешить группе и владельцу выполнять файл

```bash
chmod ug+x script.sh
```

## Особые права

* Sticky-бит (`t`):
  * Разрешает удаление файлов в папке только их владельцам.
  * Применяется к общедоступным папкам, например `/tmp`.

Установка:

```bash
chmod +t folder
```

* Setuid и Setgid (`s`):
  * Setuid: процесс запускается с правами владельца файла.
  * Setgid: процесс запускается с правами группы файла.

Установка:

```bash
chmod u+s file   # Setuid
chmod g+s file   # Setgid
```
